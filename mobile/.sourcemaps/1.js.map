{"version":3,"sources":["../../src/pages/item-edit/item-edit.module.ts","../../src/pages/item-edit/item-edit.ts"],"names":[],"mappings":"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","file":"1.js","sourcesContent":["/**\n * @Author: Nicolas Fazio <webmaster-fazio>\n * @Date:   17-04-2017\n * @Email:  contact@nicolasfazio.ch\n * @Last modified by:   webmaster-fazio\n * @Last modified time: 17-04-2017\n */\n\nimport { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ItemEdit } from './item-edit';\n\n@NgModule({\n  declarations: [\n    ItemEdit,\n  ],\n  imports: [\n    IonicPageModule.forChild(ItemEdit),\n  ],\n  exports: [\n    ItemEdit\n  ]\n})\nexport class ItemEditModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/item-edit/item-edit.module.ts","/**\n * @Author: Nicolas Fazio <webmaster-fazio>\n * @Date:   17-04-2017\n * @Email:  contact@nicolasfazio.ch\n * @Last modified by:   webmaster-fazio\n * @Last modified time: 30-05-2017\n */\n\nimport { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\n\nimport { Store, Action } from '@ngrx/store'\nimport 'rxjs/add/operator/map';\n\nimport { DataActions, ITodo } from \"../../core\";\n\n/**\n * Generated class for the ItemEdit page.\n *\n * See http://ionicframework.com/docs/components/#navigation for more info\n * on Ionic pages and navigation.\n */\n@IonicPage({\n  name: 'ItemEditPage',\n  segment: 'items/:id',\n  defaultHistory: ['ItemsPage']\n})\n@Component({\n  selector: 'page-item-edit',\n  templateUrl: 'item-edit.html',\n})\nexport class ItemEdit {\n\n  public updatedState:boolean = false;\n  public todo:ITodo;\n  public form: FormGroup;\n  public todoDate:string; // date as a string value in ISO format\n\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public fb: FormBuilder,\n    private store: Store<any>,\n    private dataActions: DataActions\n  ) {\n    // get todo item from navParams\n    this.todo = this.navParams.get('todo')\n    if(this.todo){\n        // converting todo.deadline to IOS Format for the Ionic DatePicker input\n        this.todoDate = new Date(+this.todo.deadline).toISOString()\n        // create a FormGroup to edit todo with todo datas\n        this.form = fb.group({\n            description: [this.todo.description, Validators.minLength(2)],\n            isComplete: [this.todo.isComplete, Validators.required],\n            deadline: [this.todoDate, Validators.required],\n            expire: [this.todo.expire, Validators.required]\n          });\n    }\n    else {\n      // TODO: datas NOT in navParams:\n      /* Now we have two solution:\n            1: - get data item with service.load() by using navParams id\n                 if existe else using  URL last params after /\n               - add async pipe in html\n               - add Elvis operator\n            2: - kick user in root app if navParams in empty\n               - add Elvis operator\n      */\n      // Solution 2: kick user in root page app\n      // create a empty form\n      this.form = fb.group({\n          description: ['', Validators.minLength(2)],\n          isComplete: ['', Validators.required],\n          deadline: ['', Validators.required],\n          expire: ['', Validators.required]\n        });\n      // then kick user\n      console.log('kick user')\n      this.navCtrl.setRoot('ItemsPage')\n    }\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad ItemEdit');\n  }\n\n  saveTodo():void{\n    // use the form datas\n    let updated = this.form.value\n    // convert new ISO Date to timestampe (number) to store into our bdd\n    let newDate = new Date(updated.deadline).getTime()\n    // add ID param to the updated todo\n    updated._id = this.todo._id\n    // add convert ISO Date format to the param deadline\n    updated.deadline = newDate\n    // then send the todo ready to todoService\n    this.store.dispatch(<Action>this.dataActions.update_data( { path: '/todos', params: updated} ));\n    this.navCtrl.pop()\n  }\n\n  deleteTodo():void{\n    // use item ID\n    this.store.dispatch(<Action>this.dataActions.delete_data( { path: '/todos', params: this.todo} ));\n    // pop() navigation\n    this.navCtrl.pop()\n  }\n\n  cancel():void{\n    // pop() navigation\n    this.navCtrl.pop()\n  }\n\n  toogleClick(){\n    console.log(this.form.value.expire)\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/item-edit/item-edit.ts"],"sourceRoot":""}